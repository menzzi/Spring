# ìŠ¤í”„ë§ MVC - ì›¹ í˜ì´ì§€ ë§Œë“¤ê¸°

# í”„ë¡œì íŠ¸ ìƒì„±

# **ìš”êµ¬ì‚¬í•­ ë¶„ì„**

â†’ìƒí’ˆì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ì.

â€œ**ìƒí’ˆ ë„ë©”ì¸ ëª¨ë¸â€**

- ìƒí’ˆ ID
- ìƒí’ˆëª…
- ê°€ê²©
- ìˆ˜ëŸ‰

â€œ**ìƒí’ˆ ê´€ë¦¬ ê¸°ëŠ¥â€**

- ìƒí’ˆ ëª©ë¡
- ìƒí’ˆ ìƒì„¸
- ìƒí’ˆ ë“±ë¡
- ìƒí’ˆ ìˆ˜ì •

# **ìƒí’ˆ ë„ë©”ì¸ ê°œë°œ**

@Data â†’ @Getter,@Setter ë¿ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ê°€ì§€ê°€ ë“¤ì–´ìˆìŒ (ìœ„í—˜)

â‡’ @Getter,@Setter ì§ì ‘ ì°ëŠ”ê²Œ ë‚«ë‹¤.

@Data ëŠ” í•µì‹¬ ë„ë©”ì¸ì— ì‚¬ìš©í•˜ê¸°ì—” ìœ„í—˜í•˜ë‹¤â€¦.!

```java
@Data //-> ìœ„í—˜
//@Getter @Setter -> ê¶Œì¥
public class Item {

    private Long id;
    private String itemName;
    private Integer price; //price ê°€ ì•ˆë“¤ì–´ê°ˆë•Œë„ ìˆë‹¤ê³  ê°€ì • -> Integer
    private Integer quantity; // ë§Œì•½ int ë©´ 0ì´ë¼ë„ ë“¤ì–´ê°€ì•¼í•¨

    public Item() {
    }

    public Item(String itemName, Integer price, Integer quantity) {
        this.itemName = itemName;
        this.price = price;
        this.quantity = quantity;
    }
}
```

# **ìƒí’ˆ ì„œë¹„ìŠ¤ HTML**

ì  ë¦¬ì†ŒìŠ¤ê°€ ê³µê°œë˜ëŠ” /resources/static í´ë”ì— HTMLì„ ë„£ì–´ë‘ë©´, ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œë„
ê³µê°œëœë‹¤. ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•œë‹¤ë©´ ì§€ê¸ˆì²˜ëŸ¼ ê³µê°œí•  í•„ìš”ì—†ëŠ” HTMLì„ ë‘ëŠ” ê²ƒì€ ì£¼ì˜í•˜ì.

â†’ íƒ€ì„ë¦¬í”„ë¡œ í•´ê²°

# **ìƒí’ˆ ëª©ë¡ - íƒ€ì„ë¦¬í”„**

`@RequiredArgsConstructor`

: finalì´ ë¶™ì€ ë©¤ë²„ë³€ìˆ˜ë§Œ ì‚¬ìš©í•´ì„œ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.

# ìƒí’ˆ ìƒì„¸

# ìƒí’ˆ ë“±ë¡ í¼

# ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ - @ModelAttribute

```java
		@PostMapping("/add")
    public String addItemV1(@RequestParam String itemName,
                       @RequestParam int price,
                       @RequestParam Integer quantity,
                       Model model){
        Item item = new Item();
        item.setItemName(itemName);
        item.setPrice(price);
        item.setQuantity(quantity); // ì´ë¶€ë¶„ë“¤ì€ modelAttributeê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ!!!

        itemRepository.save(item);

        model.addAttribute("item",item);

        return "basic/item";
    }
```

```java
		@PostMapping("/add")
    public String addItemV2(@ModelAttribute("item") Item item, Model model){

        itemRepository.save(item);

  //      model.addAttribute("item",item); ìë™ ì¶”ê°€ ìƒëµ ê°€ëŠ¥

        return "basic/item";
    }
```

**@ModelAttribute - ìš”ì²­ íŒŒë¼ë¯¸í„° ì²˜ë¦¬**

@ModelAttribute ëŠ” Item ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ í”„ë¡œí¼í‹° ì ‘ê·¼ë²•(setXxx)ìœ¼ë¡œ ì…ë ¥í•´ì¤€ë‹¤.

**@ModelAttribute - Model ì¶”ê°€**

@ModelAttribute ëŠ” ì¤‘ìš”í•œ í•œê°€ì§€ ê¸°ëŠ¥ì´ ë” ìˆëŠ”ë°, ë°”ë¡œ ëª¨ë¸(Model)ì— @ModelAttribute ë¡œ
ì§€ì •í•œ ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ë„£ì–´ì¤€ë‹¤. ì§€ê¸ˆ ì½”ë“œë¥¼ ë³´ë©´ model.addAttribute("item", item) ê°€ ì£¼ì„ì²˜ë¦¬
ë˜ì–´ ìˆì–´ë„ ì˜ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ëª¨ë¸ì— ë°ì´í„°ë¥¼ ë‹´ì„ ë•ŒëŠ” ì´ë¦„ì´ í•„ìš”í•˜ë‹¤. ì´ë¦„ì€ @ModelAttribute ì— ì§€ì •í•œ name(value) ì†ì„±ì„
ì‚¬ìš©í•œë‹¤. ë§Œì•½ ë‹¤ìŒê³¼ ê°™ì´ @ModelAttribute ì˜ ì´ë¦„ì„ ë‹¤ë¥´ê²Œ ì§€ì •í•˜ë©´ ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ëª¨ë¸ì—
í¬í•¨ëœë‹¤.

@ModelAttribute("hello") Item item ì´ë¦„ì„ hello ë¡œ ì§€ì •
model.addAttribute("hello", item); ëª¨ë¸ì— hello ì´ë¦„ìœ¼ë¡œ ì €ì¥

â†’ ì¦‰ @ModelAttribute("item") Item item ì—ì„œ (â€itemâ€)ì„ ìƒëµí•˜ë©´ í´ë˜ìŠ¤ ëª…ì¸ Itemì—ì„œ ì²«ê¸€ìë¥¼ ì†Œë¬¸ìë¡œ ë°”ê¿” ê¸°ë³¸ìœ¼ë¡œ itemì´ ëœë‹¤.

```java
@PostMapping("/add")
    public String addItemV3(@ModelAttribute Item item){
        itemRepository.save(item);
        return "basic/item";
    }
```

```java
@PostMapping("/add")
    public String addItemV4(Item item){
        itemRepository.save(item);
        return "basic/item";
    }
```

# ìƒí’ˆ ìˆ˜ì •

```java
		@GetMapping("/{itemId}/edit")
    public String editForm(@PathVariable Long itemId,Model model){
        Item item = itemRepository.findById(itemId);
        model.addAttribute("item",item);

        return "basic/editForm";
    }

    @PostMapping("/{itemId}/edit")
    public String edit(@PathVariable Long itemId,@ModelAttribute Item item){
        itemRepository.update(itemId,item);
        return "redirect:/basic/items/{itemId}";
    }
```

**ë¦¬ë‹¤ì´ë ‰íŠ¸**

â†’ ìƒí’ˆ ìˆ˜ì •ì€ ë§ˆì§€ë§‰ì— ë·° í…œí”Œë¦¿ì„ í˜¸ì¶œí•˜ëŠ” ëŒ€ì‹ ì— ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ë„ë¡ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼
í˜¸ì¶œí•œë‹¤.
â†’ ìŠ¤í”„ë§ì€ redirect:/... ìœ¼ë¡œ í¸ë¦¬í•˜ê²Œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ ì§€ì›í•œë‹¤.

redirect:/basic/items/{itemId}

- ì»¨íŠ¸ë¡¤ëŸ¬ì— ë§¤í•‘ëœ @PathVariable ì˜ ê°’ì€ redirect ì—ë„ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.
- redirect:/basic/items/{itemId} â†’ {itemId} ëŠ” @PathVariable Long itemId ì˜ ê°’ì„
ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤.

*ì°¸ê³ *

HTML Form ì „ì†¡ì€ PUT, PATCHë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. GET, POSTë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
(PUT, PATCHëŠ” HTTP API ì „ì†¡ì‹œì— ì‚¬ìš©)
ìŠ¤í”„ë§ì—ì„œ HTTP POSTë¡œ Form ìš”ì²­í•  ë•Œ íˆë“  í•„ë“œë¥¼ í†µí•´ì„œ PUT, PATCH ë§¤í•‘ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ, HTTP ìš”ì²­ìƒ POST ìš”ì²­ì´ë‹¤.

# **PRG Post/Redirect/Get**

<aside>
ğŸš¨ ì‹¬ê°í•œ ë¬¸ì œ
ìƒí’ˆ ë“±ë¡ì„ ì™„ë£Œí•˜ê³  ì›¹ ë¸Œë¼ìš°ì €ì˜ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ í´ë¦­í•´ë³´ì.
ìƒí’ˆì´ ê³„ì†í•´ì„œ ì¤‘ë³µ ë“±ë¡ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

</aside>

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-06-22 á„‹á…©á„’á…® 1.51.10.png](%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20MVC%20-%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%91%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5%20fd3be2ddee524153ae3b39504cf06761/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-06-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_1.51.10.png)

ë‚´ìš©ì€ ê°™ê³  IDë§Œ ë‹¤ë¥¸ ë°ì´í„°ê°€ ê³„ì† ìŒ“ì¸ë‹¤â€¦

â†’ í•´ê²°

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-06-22 á„‹á…©á„’á…® 1.53.43.png](%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20MVC%20-%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%91%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5%20fd3be2ddee524153ae3b39504cf06761/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-06-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_1.53.43.png)

```java
@PostMapping("/add")
    public String addItemV5(Item item){
        itemRepository.save(item);
        return "redirect:/basic/items/"+item.getId();
    }
```

âš¡ï¸**ì£¼ì˜**

"redirect:/basic/items/" + item.getId() redirectì—ì„œ +item.getId() ì²˜ëŸ¼ URLì— ë³€ìˆ˜ë¥¼
ë”í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ URL ì¸ì½”ë”©ì´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ìœ„í—˜í•˜ë‹¤. 

ë‹¤ìŒì— ì„¤ëª…í•˜ëŠ” RedirectAttributes ë¥¼ ì‚¬ìš©í•˜ì.

# RedirectAttributes

ìƒí’ˆì„ ì €ì¥í•˜ê³  ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•œ ê²ƒ ê¹Œì§€ëŠ” ì¢‹ì•˜ë‹¤. 

ê·¸ëŸ°ë° ê³ ê° ì…ì¥ì—ì„œ ì €ì¥ì´ ì˜ ëœ ê²ƒì¸ì§€ ì•ˆ ëœ ê²ƒì¸ì§€ í™•ì‹ ì´ ë“¤ì§€ ì•ŠëŠ”ë‹¤. 

ê·¸ë˜ì„œ ì €ì¥ì´ ì˜ ë˜ì—ˆìœ¼ë©´ ìƒí’ˆ ìƒì„¸ í™”ë©´ì— "ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤"ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ë³´ì—¬ë‹¬ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ ì™”ë‹¤.!!

```java
@PostMapping("/add")
    public String addItemV6(Item item, RedirectAttributes redirectAttributes){
        Item savedItem = itemRepository.save(item);
        redirectAttributes.addAttribute("itemId", savedItem.getId());
        redirectAttributes.addAttribute("status",true );
        //status ê°€ true ë©´ ì´ê±´ ì €ì¥í•´ì„œ ë„˜ì–´ì™”êµ°
        return "redirect:/basic/items/{itemId}";
    }
```

ì‹¤í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.

 [http://localhost:8080/basic/items/3?status=true](http://localhost:8080/basic/items/3?status=true) 

- **RedirectAttributes**

: RedirectAttributes ë¥¼ ì‚¬ìš©í•˜ë©´ URL ì¸ì½”ë”©ë„ í•´ì£¼ê³ , pathVarible , ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ê¹Œì§€ ì²˜ë¦¬í•´ì¤€ë‹¤.

â†’ redirect:/basic/items/{itemId}

- pathVariable ë°”ì¸ë”©: {itemId}
- ë‚˜ë¨¸ì§€ëŠ” ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬: ?status=true

ë·° í…œí”Œë¦¿ì— status=true ê°’ì´ ìˆìœ¼ë©´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ë©”ì„¸ì§€ ì¶œë ¥!!