# ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ

## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

```java
//ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
ApplicationContext applicationContext =
                  new AnnotationConfigApplicationContext(AppConfig.class);
```

ApplicationContext = ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ & ì¸í„°í˜ì´ìŠ¤

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” XMLì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ë„ ìˆê³  ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ìë°” ì„¤ì • í´ë˜ìŠ¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ìš”ì¦˜ì€ ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ ë§ì´ í•¨.

â†’ AppConfig ë¥¼ ì‚¬ìš©í–ˆë˜ ë°©ì‹ new AnnotationConfigApplicationContext(AppConfig.class);

>> new AnnotationConfigApplicationContext(AppConfig.class)
>> 
<img width="800" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-19 á„‹á…©á„’á…® 2 29 43" src="https://user-images.githubusercontent.com/124131845/234782475-8337d7b5-d5e1-41f7-9932-7b6e8217c14b.png">

ë¹ˆ ì´ë¦„ = í‚¤ , ë¹ˆ ê°ì²´ = ê°’

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì¤˜ì•¼ í•œë‹¤ â†’ AppConfigë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¹€

> ì£¼ì˜) ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼í•œë‹¤.
> 

<img width="800" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-19 á„‹á…©á„’á…® 2 32 33" src="https://user-images.githubusercontent.com/124131845/234782425-f0b45c90-a953-4703-8892-170242c88cdf.png">

- ë¹ˆ ì´ë¦„ì€ ì£¼ë¡œ ë©”ì„œë“œ ì´ë¦„ì„ ì‚¬ìš©í•˜ì§€ë§Œ, `@Bean(name="memberService2")`
ì´ë ‡ê²Œ ì§ì ‘ ë¶€ì—¬í•  ìˆ˜ ë„ ìˆë‹¤.

**3.ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì •** 

<img width="800" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-19 á„‹á…©á„’á…® 2 43 39" src="https://user-images.githubusercontent.com/124131845/234782438-851f5524-7aea-435f-9d23-7685ec6a73e5.png">

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ DI í•œë‹¤.

## ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ê¸°ë³¸

```java
@Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ x")
    void findBeanByNameX() {
//         ac.getBean("xxxxx", MemberService.class);
         assertThrows(NoSuchBeanDefinitionException.class,
                ()->ac.getBean("xxxxx", MemberService.class));
         // ì˜¤ë¥¸ìª½ ë¡œì§ì„ ì‹¤í–‰í•˜ë©´ ì™¼ìª½ Exceptionì´ í„°ì ¸ì•¼í•œë‹¤.
        // ì˜ˆì™¸ í„°ì§€ë©´ ì„±ê³µ ì•ˆ í„°ì§€ë©´ ì‹¤íŒ¨
    }
```

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ë™ì¼í•œ íƒ€ì…ì´ ë‘˜ ì´ìƒ

ğŸš«Â íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ë‘˜ ì´ìƒì´ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

â†’ ì´ë•ŒëŠ” ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ì.

```java
@Configuration
    static class SameBeanConfig {

        // MemberRepository ê°€ ë‘ê°œ ì´ìƒ. -> ì˜¤ë¥˜ ë°œìƒ
        @Bean
        public MemberRepository memberRepository1(){
            return new MemoryMemberRepository();
        }
        @Bean
        public MemberRepository memberRepository2(){
            return new MemoryMemberRepository();
        }
    }
```

<img width="800" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-21 á„‹á…©á„’á…® 3 11 27" src="https://user-images.githubusercontent.com/124131845/234782513-8065def1-17d4-4d35-92b4-8453f880616e.png">

NoUniqueBeanDefinitionException ë°œìƒ

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ìƒì† ê´€ê³„

ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒì˜ ê¸°ë³¸ ì›ì¹™ : ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´ ìì‹ íƒ€ì…ë„ í•¨ê»˜ ì¡°íšŒëœë‹¤.

â†’ ìë°” ê°ì²´ì˜ ìµœê³  ì¡°ìƒì¸ â€˜objectâ€™ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´ ,ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ì¡°íšŒí•œë‹¤.

ğŸš«Â ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´ ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

- ì½”ë“œ
    
    ```java
    @Test
        @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤")
        void FinBeanByParentTypeDuplicate(){
            assertThrows(NoUniqueBeanDefinitionException.class,
                    () -> ac.getBean(DiscountPolicy.class));
    
        }
        @Test
        @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤")
        void FinBeanByParentTypeBeanName(){
            DiscountPolicy rateDiscountPolicy = ac.getBean("rateDiscountPolicy", DiscountPolicy.class);
            assertThat(rateDiscountPolicy).isInstanceOf(RateDiscountPolicy.class);
    
        }
    
        @Test
        @DisplayName("íŠ¹ì • í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ") // ë³„ë¡œ ì¢‹ì§€ ì•Šì€ ë°©ë²•
        void findBeanBySubType(){
            RateDiscountPolicy bean = ac.getBean(RateDiscountPolicy.class);
            assertThat(bean).isInstanceOf(RateDiscountPolicy.class);
        }
        @Test
        @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
        void findAllBeanByParentType(){
            Map<String, DiscountPolicy> beansOfType = ac.getBeansOfType(DiscountPolicy.class);
            assertThat(beansOfType.size()).isEqualTo(2);
            for (String key : beansOfType.keySet()) {
                System.out.println("key = " + key + " value = " + beansOfType.get(key));
            }
        }
        @Test
        @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸° - Object")
        void findAllBeanByObjectType(){
            Map<String, Object> beansOfType = ac.getBeansOfType(Object.class);
            for (String key : beansOfType.keySet()) {
                System.out.println("key = " + key + " value = " + beansOfType.get(key));
            }
    
        }
    
        @Configuration
        static class TestConfig {
    
            @Bean
            public DiscountPolicy rateDiscountPolicy(){
                return new RateDiscountPolicy();
            }
    
            @Bean
            public DiscountPolicy fixDiscountPolicy(){
                return new FixDiscountPolicy();
            }
    
        }
    ```
    

## BeanFactoryì™€ ApplicationContext

<img width="800" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-21 á„‹á…©á„’á…® 4 56 24" src="https://user-images.githubusercontent.com/124131845/234782564-45f0f076-63a0-4579-a6da-31d9abe953a2.png">

**BeanFactory**

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤
ìŠ¤í”„ë§ ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹

getBean() ì„ ì œê³µ (ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ ì‚¬ìš©í–ˆë˜ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì€ BeanFactoryê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥)

**ApplicationContext**

BeanFactory ê¸°ëŠ¥ì„ ëª¨ë‘ ìƒì†ë°›ì•„ì„œ ì œê³µ

<aside>
â“ ë¹ˆì„ ê´€ë¦¬í•˜ê³  ê²€ìƒ‰í•˜ëŠ” ê¸°ëŠ¥ì„ BeanFactoryê°€ ì œê³µí•´ì£¼ëŠ”ë°, ê·¸ëŸ¬ë©´ ë‘˜ì˜ ì°¨ì´ê°€ ë­˜ê¹Œ?

:ApplicationContextëŠ” ë¹ˆ ê´€ë¦¬ê¸°ëŠ¥ + í¸ë¦¬í•œ ë¶€ê°€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

</aside>

>> BeanFactoryë¥¼ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤. ë¶€ê°€ê¸°ëŠ¥ì´ í¬í•¨ëœ ApplicationContextë¥¼ ì‚¬ìš©í•œë‹¤.

>> BeanFactoryë‚˜ ApplicationContextë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.

## ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ ì§€ì› - ìë°” ì½”ë“œ,XML

<img width="800" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-24 á„‹á…©á„’á…® 12 33 01" src="https://user-images.githubusercontent.com/124131845/234782716-94fdeee4-fa2c-400e-88f6-97ead92f6827.png">
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ì–‘í•œ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ë¥¼ ë°›ì•„ë“œë¦´ ìˆ˜ ìˆê²Œ ìœ ì—°í•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆë‹¤.

â†’ ì‹¬ì§€ì–´ ì„ì˜ì˜ ë¬´ì–¸ê°€ë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

- GenericXml : ìë°” ì½”ë“œê°€ ì•„ë‹ˆë¼  Xml ì´ë¼ëŠ” ë¬¸ì„œë¥¼ ì„¤ì • ì •ë³´ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒ.
    - ì»´íŒŒì¼ ì—†ì´ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì !!
    - ê·¸ëƒ¥ Xml ì„¤ì • íŒŒì¼ì„ ë„˜ê¸°ë©´ ëœë‹¤.

ì£¼ë¡œ ìë°” ì½”ë“œ ê¸°ë°˜ì˜ AnnotationConfigë¥¼ ë§ì´ ì‚¬ìš©í•˜ê³  ê³¼ê±°ì— Xmlì„ ë§ì´ ì‚¬ìš©í–ˆë‹¤. ê·¸ë˜ì„œ í•œë²ˆì¯¤ ê³µë¶€í•´ë³´ëŠ” ê²ƒì´ ì¢‹ìŒ!!


<img width="359" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-24 á„‹á…©á„’á…® 12 47 51" src="https://user-images.githubusercontent.com/124131845/234782626-c74bf984-54ba-4e02-9eb6-a3ad6734c962.png">

Xml íŒŒì¼ì€ resources!! ( * ìë°” ì½”ë“œê°€ ì•„ë‹Œê±´ ë‹¤ resourcesì— ë‘ë©´ ëœë‹¤. )

## ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ - BeanDefinition

ìŠ¤í”„ë§ì€ BeanDefinitionìœ¼ë¡œ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ë¥¼ ì¶”ìƒí™” í•œë‹¤.
