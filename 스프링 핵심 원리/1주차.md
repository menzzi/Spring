# 1μ£Όμ°¨

# κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ™€ μ¤ν”„λ§

## μ¤ν”„λ§μ΄λ€?

πμ¤ν”„λ§ ν•µμ‹¬

- μλ°” μ–Έμ–΄ κΈ°λ°μ ν”„λ μ„μ›ν¬
- μλ°” μ–Έμ–΄μ ν° νΉμ§• β†’ κ°μ²΄ μ§€ν–¥ μ–Έμ–΄
- μ¤ν”„λ§μ€ κ°μ²΄ μ§€ν–¥ μ–Έμ–΄κ°€ κ°€μ§„ κ°•λ ¥ν• νΉμ§•μ„ μ‚΄λ ¤λ‚΄λ” ν”„λ μ„μ›ν¬
- μ¤ν”„λ§μ€ μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ• ν”λ¦¬μΌ€μ΄μ…μ„ κ°λ°ν•  μ μκ² λ„μ™€μ£Όλ” ν”„λ μ„μ›ν¬

## μΆ‹μ€ κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ΄λ€?

πΈΒ κ°μ²΄ μ§€ν–¥μ κ½ƒμ€ λ‹¤ν•μ„±

- μ¤ν”„λ§μ€ λ‹¤ν•μ„±μ„ κ·Ήλ€ν™”ν•΄μ„ μ΄μ©ν•  μ μκ² λ„μ™€μ¤

## μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™(SQLID)

<aside>
π **SQLID**

SRP: λ‹¨μΌ μ±…μ„ μ›μΉ™(single responsibility principle)
OCP: κ°λ°©-νμ‡„ μ›μΉ™ (Open/closed principle)
LSP: λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™ (Liskov substitution principle)
ISP: μΈν„°νμ΄μ¤ λ¶„λ¦¬ μ›μΉ™ (Interface segregation principle)
DIP: μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™ (Dependency inversion principle)

</aside>

- SRP - ν•λ‚μ ν΄λμ¤λ” ν•λ‚μ μ±…μ„λ§ κ°€μ§„λ‹¤.
    - λ³€κ²½μ΄ μμ„ λ• νκΈ‰ ν¨κ³Όκ°€ μ μΌλ©΄ λ‹¨μΌ μ±…μ„ μ›μΉ™μ„ μ λ”°λ¥Έ κ²ƒ(μ¤‘μ”ν• κΈ°μ¤€ : λ³€κ²½)

<κ°€μ¥ μ¤‘μ”ν• μ›μΉ™!!>

- **OCP** - ν™•μ¥μ—λ” μ—΄λ ¤ μμΌλ‚, λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤.
    - λ‹¤ν•μ„± ν™μ©
    - μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• μƒλ΅μ΄ ν΄λμ¤λ¥Ό ν•λ‚ λ§λ“¤μ–΄μ„(β†’μ½”λ“ λ³€κ²½β) μƒλ΅μ΄ κΈ°λ¥ κµ¬ν„
    - λ¬Έμ μ  β€” κµ¬ν„ κ°μ²΄λ¥Ό λ³€κ²½ν•λ ¤λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•΄μ•Όν•λ‹¤. (λ‹¤ν•μ„± β­•οΈ OCPβ)
        
        π’΅Β λ³„λ„μ μ΅°λ¦½, μ„¤μ •μκ°€ ν•„μ”ν•λ‹¤ β†’ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ μ—­ν• 
        
	<img width="900" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-10 α„‹α…©α„’α…® 6 50 03" src="https://user-images.githubusercontent.com/124131845/232696414-2a027308-64fc-49d9-b2f7-266014636fa2.png">

        
        β†’ new MemoryMemberRepository ν•΄μ„ MemberService MemoryMemberRepositoryμ— μμ΅΄ν•κ³  μλ‹¤.( = μ½”λ“λ¥Ό μ•λ‹¤) // MemberService κ°€ μ§μ ‘ MemoryMemberRepository  μ„ νƒ
        
        β‡’ μΈν„°νμ΄μ¤μ—λ„ μμ΅΄ν•μ§€λ§ κµ¬ν„μ²΄μ—λ„ μμ΅΄ν–κΈ°μ— λ°μƒν• λ¬Έμ μ  (DIP μ„λ°)
        
- LSP - ν”„λ΅κ·Έλ¨μ κ°μ²΄λ” ν”„λ΅κ·Έλ¨μ μ •ν™•μ„±μ„ κΉ¨λ¨λ¦¬μ§€ μ•μΌλ©΄μ„ ν•μ„ νƒ€μ…μ μΈμ¤ν„΄μ¤λ΅ λ°”κΏ€ μ μμ–΄μ•Ό ν•λ‹¤.
    - EX) μλ™μ°¨ μΈν„°νμ΄μ¤μ μ—‘μ…€μ€ μ•μΌλ΅ κ°€λ” κΈ°λ¥ - λ’¤λ΅ κ°€λ©΄ LSP μ„λ°! λλ¦¬λ”λΌλ„ μ•μΌλ΅ κ°€μ•Όν•¨. μ•μΌλ΅ κ°€λ” κΈ°λ¥ λ³΄μ¥ν•΄ μ¤μ•Ό ν•λ‹¤.
    
- ISP - νΉμ • ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„ν• μΈν„°νμ΄μ¤ μ—¬λ¬ κ°κ°€ λ²”μ© μΈν„°νμ΄μ¤ ν•λ‚λ³΄λ‹¤ λ‚«λ‹¤.
    - EX) ( μλ™μ°¨ μΈν„°νμ΄μ¤ β†’ μ΄μ „, μ •λΉ„ μΈν„°νμ΄μ¤λ΅ λ¶„λ¦¬ β€” ν΄λΌμ΄μ–ΈνΈ β†’ μ΄μ „μ,μ •λΉ„ ν΄λΌμ΄μ–ΈνΈλ΅ λ¶„λ¦¬ ) : μ •λΉ„ λ¬Έμ κ°€ μμ„ λ• μ •λΉ„ μΈν„°νμ΄μ¤,μ •λΉ„μ‚¬ ν΄λΌμ΄μ–ΈνΈλ§ μν–¥ κ°€κ³  μ΄μ „μμ—κ² μν–¥μ„ μ£Όμ§€ μ•μ
    - μΈν„°νμ΄μ¤ λ…ν™•, λ€μ²΄κ°€λ¥μ„± β¬†οΈ
    
- **DIP** - κµ¬ν„ ν΄λμ¤μ— μμ΅΄ν•μ§€ λ§κ³  μΈν„°νμ΄μ¤μ— μμ΅΄ (β€μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€, κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤.β€)
    - μ—­ν• μ— μμ΅΄ν•΄μ•Όν•λ‹¤. EX) λ°°μ°κ°€ λ€λ³Έμ— μμ΅΄ν•΄μ•Όμ§€ μƒλ€ λ°°μ°μ—κ² μμ΅΄ν•λ©΄ μƒλ€ λ°°μ°κ°€ λ°”λ€” μ‹ κ³µμ—°μ΄ λ§ν•λ‹¤.
    - μΈν„°νμ΄μ¤μ— μμ΅΄ν•΄μ•Ό μ μ—°ν•κ² κµ¬ν„μ²΄λ¥Ό λ³€κ²½ν•  μ μλ‹¤!

[μ •λ¦¬]

- κ°μ²΄ μ§€ν–¥μ ν•µμ‹¬μ€ λ‹¤ν•μ„±
- λ‹¤ν•μ„± λ§μΌλ΅λ” μ‰½κ² λ¶€ν’μ„ κ°μ•„ λΌμ°λ“― κ°λ°βΒ γ€°οΈΒ κµ¬ν„ κ°μ²΄ λ³€κ²½ν•  λ• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ λ³€κ²½λ¨
- λ‹¤ν•μ„± λ§μΌλ΅λ” OCP, DIP λ¥Ό μ§€ν‚¬ μ μ—†λ‹¤.

## κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ™€ μ¤ν”„λ§

[μ΄μ •λ¦¬]

- λ¨λ“  μ„¤κ³„μ—μ„ μ—­ν• κ³Ό κµ¬ν„μ„ λ¶„λ¦¬ν•μ.
- μ• ν”λ¦¬μΌ€μ΄μ… μ„¤κ³„λ„ κ³µμ—° μ„¤κ³„μ²λΌ λ°°μ—­λ§ λ§λ“¤μ–΄λ‘κ³  λ°°μ°λ” μ–Έμ λ“  μ μ—°ν•κ² λ³€κ²½ κ°€λ¥ν•λ„λ΅ ν•λ”κ²ƒμ΄ μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„λ‹¤. β†’ λ‹¤ν•μ„± + OCP + DIP (β‡’ μ¤ν”„λ§ μ»¨ν…μ΄λ„ ν•„μ”)
- μ΄μƒμ μΌλ΅λ” λ¨λ“  μ„¤κ³„μ— μΈν„°νμ΄μ¤λ¥Ό λ¶€μ—¬ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.  β†’ μΈν„°νμ΄μ¤ λ„μ… ν•λ©΄ μ¶”μƒν™”λΌλ” λΉ„μ© λ°μƒ
    
    β‡’ κΈ°λ¥μ„ ν™•μ¥ν•  κ°€λ¥μ„±μ΄ μ—†λ‹¤λ©΄ κµ¬μ²΄ ν΄λμ¤λ¥Ό μ§μ ‘ μ‚¬μ©ν•κ³ , ν–¥ν›„ κΌ­ ν•„μ”ν•  λ• λ¦¬ν©ν„°λ§ν•΄μ„ μΈν„°νμ΄μ¤λ¥Ό λ„μ…ν•λ” κ²ƒλ„ λ°©λ²•
    
    β‡’ ν™•μ¥ν•  κ°€λ¥μ„±μ΄ μλ‹¤λ©΄ μ²μλ¶€ν„° μΈν„°νμ΄μ¤ λ„μ…
    

---

# μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄1 - μμ  λ§λ“¤κΈ°

## ν”„λ΅μ νΈ μƒμ„±

- ν™κ²½μ„¤μ •

<img width="500" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-11 α„‹α…©α„’α…® 2 40 50" src="https://user-images.githubusercontent.com/124131845/232696596-7de6b3d1-11cc-4d80-973d-19e3172714d9.png">


Build and run  λ‘λ‹¤ intelliJ IDEAλ΅ λ°”κΏ”μ£ΌκΈ° β†’ gradle μ„ ν†µν•΄μ„ λλ¦¬μ§€ μ•κ³  λ°”λ΅  intelliJ λ΅ μ‹¤ν–‰ν•΄μ„ λΉ λ¥΄λ‹¤

## λΉ„μ§€λ‹μ¤ μ”κµ¬μ‚¬ν•­κ³Ό μ„¤κ³„

<λΉ„μ§€λ‹μ¤ μ”κµ¬μ‚¬ν•­>

- νμ›
νμ›μ„ κ°€μ…ν•κ³  μ΅°ν
μΌλ°κ³Ό VIP λ‘ κ°€μ§€ λ“±κΈ‰
νμ› λ°μ΄ν„°λ” μμ²΄ DBλ¥Ό κµ¬μ¶•ν•  μ μκ³ , μ™Έλ¶€ μ‹μ¤ν…κ³Ό μ—°λ™ν•  μ μλ‹¤. (λ―Έν™•μ •)
- μ£Όλ¬Έκ³Ό ν• μΈ μ •μ±…
νμ›μ€ μƒν’μ„ μ£Όλ¬Έ
νμ› λ“±κΈ‰μ— λ”°λΌ ν• μΈ μ •μ±…μ„ μ μ©
ν• μΈ μ •μ±…μ€ λ¨λ“  VIPλ” 1000μ›μ„ ν• μΈν•΄μ£Όλ” κ³ μ • κΈμ•΅ ν• μΈμ„ μ μ©ν•΄λ‹¬λΌ. (λ‚μ¤‘μ— λ³€κ²½ λ  μ
μλ‹¤.)
ν• μΈ μ •μ±…μ€ λ³€κ²½ κ°€λ¥μ„±μ΄ λ†’λ‹¤. νμ‚¬μ κΈ°λ³Έ ν• μΈ μ •μ±…μ„ μ•„μ§ μ •ν•μ§€ λ»ν–κ³ , μ¤ν” μ§μ „κΉμ§€ κ³ λ―Όμ„ λ―Έλ£¨κ³  μ‹¶λ‹¤. μµμ•…μ κ²½μ° ν• μΈμ„ μ μ©ν•μ§€ μ•μ„ μ λ„ μλ‹¤. (λ―Έν™•μ •)

**μ°Έκ³  : μ§€κΈμ€ μ¤ν”„λ§ μ—†λ” μμν• μλ°”λ΅λ§ κ°λ°μ„ μ§„ν–‰

## νμ› λ„λ©”μΈ μ„¤κ³„

<img width="800" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-11 α„‹α…©α„’α…® 6 03 13" src="https://user-images.githubusercontent.com/124131845/232696713-985a9e69-e7a9-43b9-9e30-3802f2c6b584.png">

νμ› λ°μ΄ν„°μ— μ ‘κ·Όν•λ” κ³„μΈµμ„ λ”°λ΅ λ§λ“¤μ—λ‹¤.(νμ› μ €μ¥μ† μΈν„°νμ΄μ¤)

- μ—­ν•  : ν΄λΌμ΄μ–ΈνΈ, νμ› μ„λΉ„μ¤, νμ› μ €μ¥μ†
- νμ› μ €μ¥μ† μ—­ν• μ κµ¬ν„ : λ©”λ¨λ¦¬ νμ› μ €μ¥μ†, DB νμ› μ €μ¥μ†, μ™Έλ¶€ μ‹μ¤ν… μ—°λ™ νμ› μ €μ¥μ†(μ…‹μ¤‘μ— ν•λ‚ μ„ νƒ, κµ¬ν„μ„ κ°μ•„ λΌμ°λ” κ²ƒ)

<img width="800" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-11 α„‹α…©α„’α…® 6 18 18" src="https://user-images.githubusercontent.com/124131845/232696846-c8243dbb-d7ce-4a9e-b779-85ae6945cd23.png">

ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨ : μ‹¤μ  μ„λ²„λ¥Ό μ‹¤ν–‰ν•μ§€ μ•κ³  κ·Έ ν΄λμ¤λ§ λ¶„μ„ν•΄μ„ λ³Ό μ μλ” κ·Έλ¦Ό 

- MemberService - νμ› μ„λΉ„μ¤ μΈν„°νμ΄μ¤
- MemberServiceImpl - κµ¬ν„μ²΄(Impl = implement)
- MemberRepository - νμ› μ €μ¥μ† μΈν„°νμ΄μ¤

κµ¬ν„μ²΄(MemoryMemberRepository, DbMemberRepository)λ“¤μ€ λ™μ μΌλ΅ κ²°μ •λλ‹¤.(μ„λ²„κ°€ λ° λ• κ²°μ •) 

**νμ› κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨**(κ°μ²΄ κ°„μ λ©”λ¨λ¦¬ μ°Έμ΅° : μ„λ²„κ°€ λ– μ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤μ λ΅ μ°Έμ΅°ν•λ”)

**ν΄λΌμ΄μ–Έλ“ β€”> MemberServiceImpl β€”> MemberRepository**

γ€°οΈΒ ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨ : μ •μ  // κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨ : λ™μ 

## νμ› λ„λ©”μΈ κ°λ°

κµ¬ν„μ²΄μ™€ μΈν„°νμ΄μ¤λ¥Ό κ°™μ€ μ„μΉμ— λ‘λ” κ²ƒ λ³΄λ‹¨  λ‹¤λ¥΄κ² λ‘λ©΄ μ„¤κ³„μƒ μΆ‹λ‹¤.(μ΄λ² μμ λ” κ°„λ‹¨ν•κ² κ°™μ΄ λ‘ .)

## νμ› λ„λ©”μΈ μ‹¤ν–‰κ³Ό ν…μ¤νΈ

β¨Β psvm + Enter λ‹¨μ¶•ν‚¤ β†’ public static void main(String[] args) { }  μƒμ„±

<DIPμ„λ°>

```java
package hello.core.member;

//κ΄€λ΅€μƒ κµ¬ν„μ²΄κ°€ ν•λ‚λ§ μμ„ λ• μΈν„°νμ΄μ¤ λ… λ’¤μ— Impl μ΄λΌκ³  λ§μ΄ μ“΄λ‹¤.
public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
	//κ°€μ…μ„ ν•κ³  μ΅°νλ¥Ό ν• λ ¤λ©΄ MemberRepository μΈν„°νμ΄μ¤κ°€ ν•„μ”ν•λ‹¤.    
	//NullPointerExeption ν„°μ§ μ μμΌλ‹ κµ¬ν„μ²΄λ¥Ό λ§λ“¤μ–΄ μ¤μ•Ό ν•λ‹¤.(κµ¬ν„μ²΄ μ—†μ΄ Nullμ΄λ©΄ μ¤λ¥ ν„°μ§)
  //MemberServiceImplμ€ μ¶”μƒν™”μ™€ κµ¬μ²΄ν™”μ— μμ΅΄.

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

## μ£Όλ¬Έκ³Ό ν• μΈ λ„λ©”μΈ μ„¤κ³„

<img width="750" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-12 α„‹α…©α„’α…® 6 20 02" src="https://user-images.githubusercontent.com/124131845/232696844-973474cf-07e2-4da8-960b-bb57ada0a8a1.png">

** μ—­ν• λ“¤μ ν‘λ ¥ κ΄€κ³„λ¥Ό κ·Έλ€λ΅ μ¬μ‚¬μ©ν•  μ μλ‹¤. β†’  νμ› μ €μ¥μ†κ°€ λ°”λ€μ–΄λ„, ν• μΈ μ •μ±…μ΄ λ°”λ€μ–΄λ„ μ£Όλ¬Έ μ„λΉ„μ¤ κµ¬ν„μ²΄λ¥Ό λ³€κ²½ν•  ν•„μ”κ°€ μ—†λ‹¤.

## μ£Όλ¬Έκ³Ό ν• μΈ λ„λ©”μΈ κ°λ°

<img width="376" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-14 α„‹α…©α„’α…® 1 53 24" src="https://user-images.githubusercontent.com/124131845/232696840-dd255941-a5b7-4b17-b33c-f8f7e2ea74ff.png">

DiscountPolicy μΈν„°νμ΄μ¤ - FixDiscountPolicy κµ¬ν„μ²΄

MemberRepository μΈν„°νμ΄μ¤ - MemoryMemberRepository κµ¬ν„μ²΄

MemberService μΈν„°νμ΄μ¤ - MemberServiceImpl κµ¬ν„μ²΄

- enum νƒ€μ…μ€ == μ¨μ•Όν•λ‹¤.
    
    `if(member.getGrade() == Grade.*VIP*)`
    
    order ν¨ν‚¤μ§€ > OrderServiceImpl ν΄λμ¤
    
    ```java
    @Override
        public Order createOrder(Long memberId, String itemName, int itemPrice) {
            Member member = memberRepository.findById(memberId);
            int discountPrice = discountPolicy.discount(member, itemPrice);
            //μ„¤κ³„κ°€ μλ¨(λ‹¨μΌ μ²΄κ³„ μ›μΉ™ μ μ§€ν‚΄) ->OrderService μ…μ¥μ—μ„λ” ν• μΈμ— λ€ν•΄μ„ λ¨λ¦„
            //                              discount μ—μ„ ν• μΈμ€ μ•μ•„μ„ ν•κ³  κ²°κ³Όλ§ λμ Έμ¤
            //λ‚μ¤‘μ— ν• μΈ λ³€κ²½μ΄ ν•„μ”ν•  λ• ν• μΈλ§ λ³€κ²½ν•λ©΄ λ¨.
    
            return new Order(memberId, itemName, itemPrice, discountPrice);
    
        }
    ```
    
    β†’ OrderServiceλ” ν• μΈμ— λ€ν•΄ λ¨λ¥΄κ³  discountμ—κ² ν• μΈ λ¶€λ¶„μ€ κ·Έλƒ¥ λ„κΈ΄λ‹¤(μ„¤κ³„ μ λ κ²½μ°!!)
    

## μ£Όλ¬Έκ³Ό ν• μΈ λ„λ©”μΈ μ‹¤ν–‰κ³Ό ν…μ¤νΈ

---

# μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄2 - κ°μ²΄ μ§€ν–¥ μ›λ¦¬ μ μ©

## μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°

μ•…λ• κΈ°νμ : β€κΈ°μ΅΄ μ •μ±…μ€ VIPκ°€ 10000μ›μ„ μ£Όλ¬Έν•λ“  20000μ›μ„ μ£Όλ¬Έν•λ“  ν•­μƒ 1000μ›μ„ ν• μΈν–λ”λ°, μ΄λ²μ— μƒλ΅ λ‚μ¨ μ •μ±…μ€ 10%λ΅ μ§€μ •ν•΄λ‘λ©΄ κ³ κ°μ΄ 10000μ› μ£Όλ¬Έμ‹ 1000μ›μ„ ν• μΈν•΄μ£Όκ³ , 20000μ› μ£Όλ¬Έμ‹μ— 2000μ›μ„ ν• μΈν•΄μ£Όλ” κ±°μ—μ”!β€

- @DisplayName : ν…μ¤νΈ ν΄λμ¤λ‚ λ©”μ„λ“λ…μ΄ μ•„λ‹ μ‚¬μ©μκ°€ μ •μν• λ…μΉ­μΌλ΅ λ³€κ²½ν•  μ μλ” κΈ°λ¥μ„ μ κ³µ(JUnit 5)

β΅οΈμ„±κ³µ ν…μ¤νΈλ„ μ¤‘μ”ν•μ§€λ§ μ‹¤ν¨ ν…μ¤νΈλ„ κΌ­ λ§λ“¤μ–΄ λ΄μ•Ό ν•λ‹¤.

- μ°Έκ³ 
    
    static import : ν•„λ“λ‚ λ©”μ„λ“λ¥Ό ν΄λμ¤λ¥Ό μ§€μ •ν•μ§€ μ•κ³ λ„ μ½”λ“μ—μ„ μ‚¬μ©ν•  μ μλ„λ΅ ν•λ” κΈ°λ¥μ΄λ‹¤. ν•΄λ‹Ή κΈ°λ¥μ€ λ²„μ „ 5λ¶€ν„° λ„μ…λμ—λ‹¤.
    
    `import static org.assertj.core.api.Assertions.*;`
    
    assert~ λ©”μ„λ“λ¥Ό μ–΄λ§λ¬΄μ‹ν•κ² λ§μ΄ μ‚¬μ©ν•λ‹¤. μ΄λ° κ²½μ°μ— static importκµ¬λ¬Έμ„ μ‚¬μ©ν•λ©΄ μ½”λ“μ κ°€λ…μ„±μ„ λ†’μΌ μ μλ‹¤. μ΄λ°μ‹μΌλ΅ μ½”λ“μ κ°€λ…μ„±μ„ λ†’μ΄λ”λ° λ„μ›€μ„ μ£Όμ§€λ§, μλ» μ‚¬μ©ν•λ” κ²½μ°μ—λ” μ½”λ“μ κ°€λ…μ„±μ„ λ”μ°ν• μμ¤€μΌλ΅ λ–¨μ–΄νΈλ¦΄μ μλ‹¤.
    

## μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ 

ν• μΈ μ •μ±… λ¶„λ¦¬ β†’ ν• μΈ μ •μ±…μ ν΄λΌμ΄μ–ΈνΈμ β€OrderServiceImplβ€™ μ½”λ“λ¥Ό κ³ μ³μ•Όν•λ‹¤.

```java
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
...
```

>> π”’Β λ¬Έμ μ  λ°κ²¬ 

- μ—­ν• κ³Ό κµ¬ν„ λ¶„λ¦¬ μ¶©μ‹¤ β†’ β­•οΈ
- λ‹¤ν•μ„± ν™μ©, μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄ λ¶„λ¦¬ β†’ β­•οΈ
- OCPμ™€ DIP κ°™μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¤€μ β†’ β(κ·Έλ ‡κ² λ³΄μ΄μ§€λ§ μ‚¬μ‹¤μ€ μ•„λ‹λ‹¤.)
    - DIP β‡’ μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ(OrderServiceImpl)μ€ DiscountPolicy μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ©΄μ„ μ§€ν‚¨κ²ƒ κ°™μ΄ λ³΄μ„ μ‹¤μ λ΅  β€DIP μ„λ°β€
        
        ν•μ§€λ§ μ¶”μƒ λΏ μ•„λ‹λΌ κµ¬ν„ν΄λμ¤μ—λ„ μμ΅΄ν•κ³  μλ‹¤.
        
        - μ¶”μƒ(μΈν„°νμ΄μ¤) μμ΅΄ : β€DiscountPolicyβ€™
        - κµ¬ν„ν΄λμ¤ μμ΅΄ : β€FixDiscountPolicyβ€™, β€RateDiscountPolicyβ€™
    - OCP β‡’ κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ μ½”λ“λ¥Ό λ³€κ²½ν•λ©΄, ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μν–¥μ„ μ¤€λ‹¤. β€OCP μ„λ°β€

>> π”‘Β λ¬Έμ μ  ν•΄κ²°

- DIP λ¥Ό μ„λ°ν•μ§€ μ•λ„λ΅ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μμ΅΄ κ΄€κ³„λ¥Ό λ³€κ²½ν•λ©΄ λλ‹¤.

<img width="750" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-17 α„‹α…©α„’α…® 1 44 19" src="https://user-images.githubusercontent.com/124131845/232697172-34a28c62-664b-4b90-a53d-cac559bebdb6.png">

```java
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
//    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
    private DiscountPolicy discountPolicy;
		//μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ½”λ“ λ³€κ²½
		//DIP μ§€ν‚΄ ν•μ§€λ§ NPE λ°μƒ.
}
...
```

μ½”λ“ λ³€κ²½(DIP μ§€ν‚΄) β†’ ν•μ§€λ§ NPE λ°μƒβ€¦!!

*ν•΄κ²°λ°©μ•*

γ€°οΈΒ λ„κµ°κ°€κ°€ ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImpl μ— DiscountPolicy μ κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•κ³  μ£Όμ…ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.

## κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬

β€κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•μβ€

- λ°°μ°λ” λ³ΈμΈμ μ—­ν• μΈ λ°°μ—­μ„ μν–‰ν•λ” κ²ƒμ—λ§ μ§‘μ¤‘ν•΄μ•Ό ν•λ‹¤.
- λ””μΉ΄ν”„λ¦¬μ¤λ” μ–΄λ–¤ μ—¬μ μ£ΌμΈκ³µμ΄ μ„ νƒ λλ”λΌλ„ λ‘κ°™μ΄ κ³µμ—°μ„ ν•  μ μμ–΄μ•Ό ν•λ‹¤.
- κ³µμ—°μ„ κµ¬μ„±ν•κ³ , λ‹΄λ‹Ή λ°°μ°λ¥Ό μ„­μ™Έν•κ³ , μ—­ν• μ— λ§λ” λ°°μ°λ¥Ό μ§€μ •ν•λ” μ±…μ„μ„ λ‹΄λ‹Ήν•λ” λ³„λ„μ **κ³µμ—° κΈ°νμ**κ°€ λ‚μ¬μ‹μ μ΄λ‹¤.
- κ³µμ—° κΈ°νμλ¥Ό λ§λ“¤κ³ , λ°°μ°μ™€ κ³µμ—° κΈ°νμμ μ±…μ„μ„ ν™•μ‹¤ν λ¶„λ¦¬ν•μ.

**AppConfig λ“±μ¥**

μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ λ™μ‘ λ°©μ‹μ„ κµ¬μ„±(config)ν•κΈ° μ„ν•΄, β€κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±β€ν•κ³ , β€μ—°κ²°β€ν•λ” μ±…μ„μ„ κ°€μ§€λ” λ³„λ„μ μ„¤μ • ν΄λμ¤λ¥Ό λ§λ“¤μ.

- AppConfigλ” μ• ν”λ¦¬μΌ€μ΄μ…μ μ‹¤μ  λ™μ‘μ— ν•„μ”ν• **κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±**ν•λ‹¤.
    - MemberServiceImpl
    - MemoryMemberRepository
    - OrderServiceImpl
    - FixDiscountPolicy
- AppConfigλ” μƒμ„±ν• κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°(λ νΌλ°μ¤)λ¥Ό **μƒμ„±μλ¥Ό ν†µν•΄μ„ μ£Όμ…(μ—°κ²°)**ν•΄μ¤€λ‹¤.
    - MemberServiceImpl β†’ MemoryMemberRepository
    - OrderServiceImpl β†’ MemoryMemberRepository , FixDiscountPolicy(λλ” RateDiscountPolicy)

MemberServiceImpl μ€ μ΄μ λ¶€ν„° **μμ΅΄κ΄€κ³„μ— λ€ν• κ³ λ―Όμ€ μ™Έλ¶€**μ— λ§΅κΈ°κ³  **μ‹¤ν–‰μ—λ§ μ§‘μ¤‘**ν•λ©΄ λλ‹¤.

> μ°Έκ³  : final λ¶™μ–΄μμΌλ©΄ κΈ°λ³ΈμΌλ΅ ν• λ‹Ή λλ” μƒμ„±μλ¥Ό ν†µν•΄ ν• λ‹Ή ν•΄μ•Όν•λ‹¤.
> 

<ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨>

<img width="700" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-17 α„‹α…©α„’α…® 3 04 56" src="https://user-images.githubusercontent.com/124131845/232697166-90f532f4-469b-4f10-8362-9726e6f39c66.png">

- κ°μ²΄μ μƒμ„±κ³Ό μ—°κ²°μ€ AppConfig κ°€ λ‹΄λ‹Ή
- **DIP μ™„μ„±:** MemberServiceImpl μ€ MemberRepository μΈ μ¶”μƒμ—λ§ μμ΅΄ν•λ©΄ λλ‹¤. μ΄μ  κµ¬μ²΄ ν΄λμ¤λ¥Ό λ°λΌλ„ λλ‹¤.
- κ΄€**μ‹¬μ‚¬μ λ¶„λ¦¬:** κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ—­ν• κ³Ό μ‹¤ν–‰ν•λ” μ—­ν• μ΄ λ…ν™•ν λ¶„λ¦¬λμ—λ‹¤.

<img width="700" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2023-04-17 α„‹α…©α„’α…® 3 09 59" src="https://user-images.githubusercontent.com/124131845/232697447-e1134bf2-6072-4c0e-8006-8ba317bb44d4.png">

```java
public class AppConfig {

    public MemberService memberService(){
        return new MemberServiceImpl(new MemoryMemberRepository());
        //μƒμ„±μ μ£Όμ…
    }
}
...
```

DI : μμ΅΄κ΄€κ³„ μ£Όμ… λλ” μμ΅΄μ„± μ£Όμ…

OrderServiceImpl λ„ MemberServiceimpl κ³Ό μ μ‚¬ν•κ² μ§„ν–‰.
